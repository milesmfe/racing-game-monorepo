# Racing Game Monorepo

Typescript monorepo for a real-time multiplayer racing game, including the game server, web client, and a track designer application.

## Project Structure

This project is a monorepo managed with npm workspaces. The codebase is organized into `apps` and `packages`:

- **`apps/`**: Contains the main applications.
  - **`server`**: A Hono-based WebSocket server that handles game logic, player connections, and lobby management.
  - **`web-svelte`**: The Svelte-based web client that players use to connect to the game, join lobbies, and race.
  - **`track-designer-react`**: A standalone React application for creating and editing race tracks.
- **`packages/`**: Contains shared code used across the different applications.
  - **`core`**: A shared package containing common types, schemas (using Zod), and utility functions for WebSocket communication and data structures.

## Architecture

The game follows a client-server architecture. The `server` application is the authoritative source of game state, while the `web-svelte` application is the client that players interact with. The `track-designer-react` application is a developer tool used to create the tracks for the game.

Communication between the client and server is handled via WebSockets, with a strictly defined messaging protocol enforced by the schemas in the `core` package.

## Features

### Game

- Real-time multiplayer racing
- Lobby system for creating and joining games
- (In-progress) Dynamic race tracks generated by the track designer

### Track Designer

- Draw complex track paths with a spline-based editor
- Generate multi-lane tracks with configurable segment lengths and lane widths
- Edit individual track segments to define properties like grid positions, pit lanes, and corners
- Create dynamic track layouts with lane merges and splits
- Export tracks to SVG for visuals and JSON for game consumption

## Getting Started

### Prerequisites

- Node.js (v18 or higher)
- npm (v8 or higher)

### Installation

1. Clone the repository:
   ```bash
   git clone https://github.com/milesmfe/racing-game-monorepo.git
   ```
2. Install dependencies from the root of the project:
   ```bash
   npm install
   ```

### Development

To run all the applications in development mode, run the following command from the root of the project:

```bash
npm run dev
```

This will concurrently start the `server`, `web-svelte`, and `track-designer-react` applications.

- **Game Server**: `http://localhost:3000`
- **Svelte Web Client**: `http://localhost:5173`
- **React Track Designer**: `http://localhost:5174`

You can also run each application individually:

- **Server**: `npm run dev:server`
- **Web Client**: `npm run dev:web-svelte`
- **Track Designer**: `npm run dev:track-designer-react`

### Building for Production

To build all applications for production, run the following command from the root of the project:

```bash
npm run build
```

This will create optimized builds in the `dist` directory of each application.
